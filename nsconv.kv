<CaptTextInput@BoxLayout>
    capt: lbl.text
    inp: ti.text
    orientation: 'vertical'
    padding: dp(5)
    Label:
        id: lbl
        text: root.capt
        size_hint_y: None
        height: self.texture_size[1]
    TextInput:
        id: ti
#        font_size: 14
        text: root.inp

<BLabel@Label+Border>
<B2Label@Label+Border2>
<B3Label@Label+Border3>
<B3ScrollView@ScrollView+Border3>

<LabelRes@GridLayout>
    capt: lbl_capt.text
    out: lbl_res.text
    lbl_capt: lbl_capt
#    orientation: 'vertical'
    rows: 2
    padding: dp(5)
    Label:
        id: lbl_capt
        text: root.capt
        size_hint_y: None
        height: self.texture_size[1]
    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        bar_width: 4
#        viewport_size: 1, 1
        Label:
            id: lbl_res
#            canvas.before:
#                Color:
#                    rgb: (.5, .5, .5)
#                Rectangle:
#                    size: self.size
#                    pos: self.pos
            text: root.out
            size_hint_y: None
            height: self.texture_size[1]
            text_size: self.width, None
            padding: 10, 10
            color: 1,1,0,1
            bold: True
#            on_touch_down: print(root, root.lbl_capt.texture_size, root.minimum_size)

<CToggButt@ToggleButton>
    group: root.group
    value: root.value
    allow_no_selection: False
#    on_press: app.root.tgbutt_pressed(self, self.group, self.text)
    on_press: value = self.value

<ToggButtGroup@BoxLayout>
    id: tbg
    orientation:'vertical'
    group: root.group
    capt: lbl.text
    val: 0
    Label:
        id: lbl
        text: root.capt
        size_hint_y: None
        height: self.texture_size[1]
    BoxLayout:
        orientation:'horizontal'
        CToggButt:
            id: tb_bin
            text: 'BIN'
            group: root.group
            val: 2
            on_state: root.val = self.val
        CToggButt:
            id: tb_oct
            text: 'OCT'
            group: root.group
            val: 8
            on_state: root.val = self.val
        CToggButt:
            id: tb_dec
            text: 'DEC'
            group: root.group
            val: 10
            on_state: root.val = self.val
        CToggButt:
            id: tb_hex
            text: 'HEX'
            group: root.group
            val: 16
            on_state: root.val = self.val
#---------------------------------------------------------------------------------------------------------
<NsConv>
    butt_ascii: butt_ascii
    butt_clear: butt_clear
    inp: cti.inp
    cti: cti
    out: outres.out
    val_inpsys: tbg_from.val
    val_outsys: tbg_to.val
    lb_debug: lb_debug
    canvas:
        Color:
            rgb: (0,0,.2)
        Rectangle:
            size: self.size
            pos: self.pos
    orientation: 'vertical'
#    padding: padding_left=20, padding_top=20, padding_right=5, padding_bottom=20
    padding: [dp(20), dp(5), dp(5), dp(20)]
    spacing: dp(5)
    outsys_name: 'Outsys'
    CaptTextInput:  #cti.ti.focus
        id: cti
        capt: 'Исходное число'
        inp: root.inp
    BLabel:
        id: lb_debug
#        font_size: 20
#        text: 'debug_info'
        size_hint_y: None
        height: self.texture_size[1] + 4
        valign: 'middle'
        on_touch_down: root.showdebug(self)
    LabelRes:
        id: outres
        capt: 'Результат'
        out: root.out
    BoxLayout:
        canvas:
            Color:
                rgb: (1,1,1)
            Line:
                rectangle: (self.x, self.y, self.width, self.height)
        orientation: 'horizontal'
        size_hint_y:.3
        Button:
            id: butt_clear
            text: 'Очистить'
            on_press: root.clr()
        CToggButt:
            id: butt_ascii
            text: 'ASCII -> ' + str(root.val_outsys)
            group: 'inpsys'
            val: 0xFFFF
            on_state: root.val_inpsys = self.val
    ToggButtGroup:
        id: tbg_from
        capt: 'Из'
        group: 'inpsys'
        val: root.val_inpsys
        size_hint_y: .4

    ToggButtGroup:
        id: tbg_to
        capt: 'В'
        group: 'outsys'
        val: root.val_outsys
        size_hint_y: .4

#--------------------------------------------------------------------

<Border@Widget>
    canvas:
        Color:
            rgb: (1, 1, 0)
        Line:
            rectangle: (self.x, self.y, self.width, self.height)

<Border2@Widget>
    canvas:
        Color:
            rgb: (0,1,1)
        Line:
            rectangle: (self.x+1, self.y+1, self.width-2, self.height-2)

<Border3@Widget>
    canvas:
        Color:
            rgb: (1,0,1)
        Line:
            rectangle: (self.x+1, self.y+1, self.width-2, self.height-2)

<Delim@Widget>
    canvas:
        Color:
            rgb: (.3,.3,.3)
        Line:
            points: (self.x+1, self.y+1, self.width-2, self.y+1)
    size: 200, 2
#    height: self.minimum_height